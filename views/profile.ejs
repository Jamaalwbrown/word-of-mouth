<%- include('partials/header') -%>
<div class="">
  <div class="mt-5">
    <div>
      <% if (messages.groupCreateError) { %>
        <div class="alert alert-error shadow-lg">
          <div>
            <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current flex-shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
            <span><%= messages.groupCreateError %></span> 
          </div>
        </div>
      <% } %>

      <h3 class="text-2xl">Account Info</h3>
      <p><strong>User Name</strong>: <%= user.userName %></p>
      <p><strong>Email</strong>: <%= user.email %></p>
    </div>

      <div class="grid md:grid-cols-2 gap-4 m-4">

        <!-- Form for submitting a review -->
        <div class="mt-5">
          <h2>Add a review</h2>
          <form action="/post/createPost" enctype="multipart/form-data" method="POST">
            
            <div class="form-control w-full max-w-xs">
              <label for="title" class="label">
                <span class="label-text">Title</span>
              </label>
              <input type="text" placeholder="Review Title" class="input input-bordered input-primary w-full max-w-xs" id="title" name="title"/>
            </div>

            <div class="form-control">
              <label for="summary" class="label">
                <span class="label-text">Summary</span>
              </label> 
              <textarea class="textarea textarea-primary" placeholder="Review Summary" id="summary" name="summary"></textarea>
            </div>

            <div class="form-control">
              <label for="review" class="label">
                <span class="label-text">Review</span>
              </label> 
              <textarea class="textarea textarea-primary" placeholder="Review" id="review" name="review"></textarea>
            </div>

            <div class="form-control w-full max-w-xs">
              <label for="category" class="label">
                <span class="label-text">Category</span>
              </label>
              <select class="select select-primary" id="category" name="category">
                <option disabled selected>Pick a category</option>
                <option>Food and Drink</option>
                <option>Experience</option>
                <option>Gaming</option>
                <option>Movie</option>
                <option>Music</option>
                <option>Podcast</option>
                <option>Product</option>
                <option>Restaurant</option>
                <option>Service</option>
                <option>TV Show</option>
                <option>Venue</option>
              </select>
            </div>

            <div class="form-control w-full max-w-xs"> 
              <label for="rating" class="label">
                <span class="label-text">Rating</span>
              </label>
              <div class="rating rating-lg rating-half">
                <input type="radio" name="rating" value="0" class="rating-hidden" />
                <input type="radio" name="rating" value="1" class="bg-yellow-500 mask mask-star-2 mask-half-1" />
                <input type="radio" name="rating" value="2" class="bg-yellow-500 mask mask-star-2 mask-half-2" />
                <input type="radio" name="rating" value="3" class="bg-yellow-500 mask mask-star-2 mask-half-1" checked />
                <input type="radio" name="rating" value="4" class="bg-yellow-500 mask mask-star-2 mask-half-2" />
                <input type="radio" name="rating" value="5" class="bg-yellow-500 mask mask-star-2 mask-half-1" />
                <input type="radio" name="rating" value="6" class="bg-yellow-500 mask mask-star-2 mask-half-2" />
                <input type="radio" name="rating" value="7" class="bg-yellow-500 mask mask-star-2 mask-half-1" />
                <input type="radio" name="rating" value="8" class="bg-yellow-500 mask mask-star-2 mask-half-2" />
                <input type="radio" name="rating" value="9" class="bg-yellow-500 mask mask-star-2 mask-half-1" />
                <input type="radio" name="rating" value="10" class="bg-yellow-500 mask mask-star-2 mask-half-2" />
              </div>
            </div>

            <div class="form-control">
              <label for="imgUpload" class="label">
                <span class="label-text">Image</span>
              </label> 
              <input type="file" class="form-control" id="imageUpload" name="file"/>
            </div>
            <button type="submit" class="btn btn-primary mt-2" value="Upload">Submit</button>
          </form>
        </div>

         <!-- Form for creating a new group -->
        <div class="mt-5">
          <h2>Create a Group</h2>
          <form action="/groups/createGroup" method="POST">

            <div class="form-control w-full max-w-xs">
              <label for="groupName" class="label">
                <span class="label-text">Group Name</span>
              </label>
              <input type="text" placeholder="Ex: OG Squad" class="input input-bordered input-primary w-full max-w-xs" id="groupName" name="groupName"/>
            </div>

            <div class="form-control">
              <label for="groupDescription" class="label">
                <span class="label-text">Group Description</span>
              </label> 
              <textarea class="textarea textarea-primary" placeholder="Ex: Group for best friends to share our reviews" id="groupDescription" name="groupDescription"></textarea>
              <label class="label">
                <span class="label-text-alt"><strong>You will be able to add members once the group is created</strong></span>
              </label> 
            </div>

            <!-- <div class="form-control">
              <label for="members" class="label">
                <span class="label-text">Members (enter usernames seperated by comma)</span>
              </label> 
              <textarea class="textarea textarea-primary" placeholder="Example: Bob, Rick, James, Sarah..." id="members" name="members"></textarea>
            </div> -->
            <button type="submit" class="btn btn-primary mt-2">Submit</button>
          </form>
        </div>
      </div>

      <div class="">
         <!-- Showing the list of reviews/posts for the logged in user -->
        <ul class="grid md:grid-cols-2 2xl:grid-cols-4 place-items-center">
           <% for(var i=0; i<posts.length; i++) {%>
            <li class="mt-5">
              <div class="card w-96 2xl:w-80 bg-base-300 shadow-xl">
                 <figure><img src="<%= posts[i].image%>" alt="review-card-image" /></figure>
                <div class="card-body">
                  <a href="/post/<%= posts[i]._id%>">
                    <h2 class="card-title"><%=posts[i].title%></h2>
                  </a>
                  <div class="flex gap-2">
                    <div class="badge badge-secondary"><%= posts[i].category %></div>
                    <div class="">
                      <ul class="rating rating-lg rating-half">
                        <% for(var j=1; j <= 10; j++) {%>
                          <% if (j % 2 == 0 && j <= posts[i].rating) { %>
                            <li class="bg-yellow-500 mask mask-star-2 mask-half-2">&nbsp;&nbsp;</li>
                        <% } %>

                          <% if (j % 2 != 0 && j <= posts[i].rating) { %>
                            <li class="bg-yellow-500 mask mask-star-2 mask-half-1">&nbsp;&nbsp;</li>
                        <% } %>

                          <% if (j % 2 == 0 && j > posts[i].rating) { %>
                            <li class="bg-gray-500 mask mask-star-2 mask-half-2">&nbsp;&nbsp;</li>
                        <% } %>

                          <% if (j % 2 != 0 && j > posts[i].rating) { %>
                            <li class="bg-gray-500 mask mask-star-2 mask-half-1">&nbsp;&nbsp;</li>
                        <% } %>

                        <% } %>
                      </ul>
                    </div>
                  </div>
                  <p><%=posts[i].summary%></p>
                  <div class="card-actions justify-end">
                    <a href="/post/<%= posts[i]._id%>" class="btn btn-primary">Read Review</a>
                  </div>
                </div>
              </div>
            </li>
          <% } %>
        </ul>
      </div>

      <!-- <div class="grid grid-cols-2 gap-4 mt-8"> -->
         <!-- We list the groups that are created by this user -->
      
        <!-- <div class="col-6">
          <h3>Groups you have created:</h3>
          <ul class="row list-unstyled">
          <% /* for(var j=0; j<groupsCreated.length; j++) { */ %> 
            <li class="col-6 justify-content-between mt-5">
              <a href="/groups/<%= /* groupsCreated[j]._id */ %>" class="link link-accent link-hover">
                <h3><%= /* groupsCreated[j].groupName */ %></h3>
              </a>
            </li>
          <% /* } */%>
          </ul>
          <div class="row justify-content-center mt-5">
            <a class="btn btn-primary" href="/feed">Return to Feed</a>
          </div>  
        </div> -->

        <!-- We list the groups that the user is a part of -->

        <!-- <div class="col-6">
          <h3>Groups you are a member of:</h3>
          <ul class="row list-unstyled">
          <% /* for(var j=0; j<groups.length; j++) { */%>
            <li class="col-6 justify-content-between mt-5">
              <a href="/groups/ <% /*= groups[j]._id */%>" class="link link-accent link-hover">
                <h3><%= /*groups[j].groupName */%></h3>
              </a>
            </li>
          <% /* } */ %>
          </ul>
          <div class="row justify-content-center mt-5">
            <a class="btn btn-primary" href="/feed">Return to Feed</a>
          </div>   
        </div>   -->

      <!-- </div>   -->
           
  </div>
</div>
<%- include('partials/footer') -%>