<%- include('partials/header') -%>
<div class="container">
  <div class="row mt-5">
      <div class="col-6">
          <div>
            <% if (messages.groupCreateSuccess) { %>
                  <div class="alert alert-success"><%= messages.groupCreateSuccess %></div>
              <% } %>
            <% if (messages.success) { %>
                  <div class="alert alert-success"><%= messages.success %></div>
              <% } %>
              <% if (messages.error) { %>
                <div class="alert alert-danger"><%= messages.error %></div>
            <% } %>
              <p><strong>Group Name</strong>: <%= group.groupName %></p>
              <p><strong>Group Description</strong>: <%= group.groupDescription %></p>
              <p><strong>Group Members</strong></p>
              <ul class="grid grid-cols-4">
                <% for(var j=0; j<group.members.length; j++) {%>
                 <li class="mt-5">
                   <div class="card w-96 bg-base-300 shadow-xl">
                      <figure><img src="<%= group.members[j].posts[0].image%>" alt="review-card-image" /></figure>
                     <div class="card-body">
                       <a href="/post/<%= group.members[j].posts[0].id%>">
                         <h2 class="card-title"><%=group.members[j].posts[0].title%></h2>
                       </a>
                       <a href="/post/<%= group.members[j].posts[0].id%>">
                        <h3 class="card-title">By <%=group.members[j].userName%></h2>
                      </a>
                       <p><%=group.members[j].posts[0].summary%></p>
                       <div class="card-actions justify-end">
                         <a href="/post/<%= group.members[j].posts[0].id%>" class="btn btn-primary">Read Review</a>
                       </div>
                     </div>
                   </div>
                 </li>
               <% } %>
             </ul>
              
              <form action="/groups/addMember/<%= group.id %>?_method=PUT" method="POST">
                <div class="mb-3">
                    <label for="username" class="form-label">Member Username</label>
                    <input type="text" class="form-control" id="username" name="username">
                </div>
                <button type="submit" class="btn btn-primary">Add Member</button>
              </form>


              <form action="/groups/addMember/<%= group.id %>?_method=PUT" method="POST">
                <div class="mb-3">
                    <label for="username" class="form-label">Member Username</label>
                    <input type="text" class="form-control" id="username" name="username">
                </div>
                <button type="submit" class="btn btn-primary">Add Member</button>
              </form>

              <%if(group.createdBy == user.id){ %>
              <form
                action="/groups/deleteGroup/<%= group.id %>?_method=DELETE"
                method="POST"
                class="col-3"
              >
                <button class="btn btn-primary" type="submit">Delete Group</button>
              </form>
              <%}%>
              <a href="/logout" class="col-3 btn btn-primary">Logout</a>
          </div>
        </div>  
    </div>
  </div>
</div>
<%- include('partials/footer') -%>